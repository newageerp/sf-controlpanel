import React, {useEffect} from "react";
import { useTranslation } from "react-i18next";
import TP_TABLE_COMP_NAME from "../tables/TP_TABLE_COMP_NAME"
import { OpenApi } from '@newageerp/nae-react-auth-wrapper';
import { functions } from '@newageerp/nae-react-ui';

export default function TP_COMP_NAME() {
    const tab = functions.tabs.getTabFromSchemaAndType('TP_SCHEMA', 'TP_TYPE');
    const fieldsToReturn = functions.tabs.getTabFieldsToReturn(tab);

    const [getData, dataResult] = OpenApi.useUList('TP_SCHEMA', fieldsToReturn);
    const { t } = useTranslation();

    const loadData = () => {
        const predefinedFilter = TP_FILTER;
        let _filter: any = [{ and: [] }]
        if (!!predefinedFilter) {
            _filter[0]['and'].push(predefinedFilter);
        }
        const page = 1;
        const pageSize = TP_PAGE_SIZE;
        const sort = TP_SORT;
        getData(
            filter,
            page,
            pageSize,
            sort
        );
    }
    useEffect(loadData, []);

    return (
        <TP_TABLE_COMP_NAME data={dataResult.data.data} />
    )
}