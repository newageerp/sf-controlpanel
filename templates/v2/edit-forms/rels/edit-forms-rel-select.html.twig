import { UI } from "@newageerp/nae-react-ui";
import { SelectAdvData } from "@newageerp/ui.form.base.form-pack";
import React, { Fragment, useState } from 'react'

interface Props {
    selectedId: string,
    onSelectId: (e: any) => void,
    parentElement: any
}

export const {{ compName }} = (props: Props) => {
    const [reloadState, setReloadState] = useState(0);
{% if allowCreateRel %}
    const { showEditPopup } = UI.Window.useNaeWindow();
    const onNew = () => {
        showEditPopup({
            id: 'new',
            schema: "{{ objectSchema }}",
            onSaveCallback: () => {
                setReloadState(new Date().getTime());
            }
        })
    }
{% endif %}
    return (
        <SelectAdvData
            reloadState={reloadState}
            withIcon={true}
            schema="{{ objectSchema }}"
            field="{{ key }}"
            selectedId={props.selectedId}
            onSelectId={props.onSelectId}
            parentElement={props.parentElement}
            parentSchema={"{{ schema }}"}
            sort={ {{ sort|raw }} }
            {% if allowCreateRel %}onCreateNew={onNew}{% endif %}
            {{ extraFilter|raw }}
        />
    )
}